<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>instano.js</title>
<link href='reset.css' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<style>
body {
	font-size: 14px;
	line-height: 20px;
	font-family: 'Roboto', sans-serif;
	font-weight: 300;
	-webkit-text-size-adjust: 100%;
}

pre {
	padding: 5px;
	font-size: 12px;
	font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif;
	margin-bottom: 10px;
	background-color: #fafafa;
	overflow: auto;
	width: auto;
	width: 650px !ie7;
	padding-bottom: 20px !ie7;
	max-height: 600px;
	border: 1px solid #eaeaea;
	border-radius: 3px;
}

code {
	font-size: 12px;
	line-height: 16px;
	font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif;
	color: #222;
	background-color: #fafafa;
	border: 1px solid #eaeaea;
	border-radius: 3px;
	padding: 2px;
}

pre code {
	border: none;
	background: none;
}

a:link, a:visited, a:hover, a:active {
	color: #dd3333;
	text-decoration: none;
}

p {
	margin-bottom: 10px;
}
</style>
<style>
#main {
	padding-top: 50px;
	padding-bottom: 20px;
	margin: 0 auto;
	width: 960px;
	min-height: 450px;
}
#banner-message {
	position: fixed;
	top: 0;
	width: 100%;
	z-index: 900;
	background: #dd3333;
	text-align: center;
	color: #ffffff;
}
#banner-padding {
	width: 100%;
	height: 20px;
}
#top {
	position: relative;
	margin-bottom: 20px;
	clear: both;
	height: 100px;
}
.left {
	position:absolute;
	left:0;
}
.right {
	position:absolute;
	bottom:0;
	right:50px;
	max-width: 500px;
}
#logo {
	font-size: 60px;
	line-height: 80px;
	font-weight: 100;
	color: #880000;
}
#logo span.emphasis {
	font-weight: 900;
	color: #dd3333;
}
#tri1 {
	width: 0;
	height: 0;
	border-right: 11px solid transparent;
	border-bottom: 20px solid black;
	position: absolute;
	left: 168px;
	top: 43px;
	border-bottom-color: #ffffff;
}
#tri2 {
	width: 0;
	height: 0;
	border-left: 22px solid transparent;
	border-top: 40px solid black;
	position: absolute;
	left: 227px;
	top: 6px;
	border-top-color: #ffffff;
}
#sublogo {
	margin-top: -16px;
	margin-left: 5px;
	float: left;
}
#indicator {
	text-align: right;
}
.instructions {
	float: right;
}
.label {
	background: #dd3333;
	border-radius: 3px;
	color: #ffffff;
	padding-left: 5px;
	padding-right: 5px;
}
.features {
	font-size: 26px;
	line-height: 26px;
	font-weight: 100;
	color: #dd3333;
	margin-top: 20px;
	margin-bottom: 20px;
}
.compare {
	margin-bottom: 20px;
}
.compare-noscript, .compare-setInterval, .compare-instano {
}
.clear {
	clear: both;
}
.title, .big-title {
	font-size: 20px;
	line-height: 24px;
	font-weight: 500;
	color: #dd3333;
}
.big-title {
	font-size: 24px;
	font-weight: 700;
}
.compare-title {
	float: left;
}
.compare-result {
	float: right;
	line-height: 24px;
}
.browser-compatibility {
	display: table;
	margin-bottom: 10px;
}
.browser-compatibility .row {
	display: table-row;
}
.browser-compatibility .cell {
	display: table-cell;
	min-width: 100px;
	padding-left: 5px;
	padding-right: 5px;
	text-align: center;
}
.browser-version {
	height: 30px;
	line-height: 30px;
	margin-left: 3px;
	margin-right: 7px;
	display: inline-block;
}
.chrome {
	background-image:url('browsers.png');
	background-size: auto 30px;
	background-position:0px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.firefox {
	background-image:url('browsers.png');
	background-size: auto 30px;
	background-position:-34px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.opera {
	background-image:url('browsers.png');
	background-size: auto 30px;
	background-position:-65px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.safari {
	background-image:url('browsers.png');
	background-size: auto 30px;
	background-position:-96px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.ie {
	background-image:url('browsers.png');
	background-size: auto 30px;
	background-position:-130px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
@media
only screen and (-webkit-min-device-pixel-ratio: 2)      and (min-width: 700px),
only screen and (   min--moz-device-pixel-ratio: 2)      and (min-width: 700px),
only screen and (     -o-min-device-pixel-ratio: 2/1)    and (min-width: 700px),
only screen and (        min-device-pixel-ratio: 2)      and (min-width: 700px),
only screen and (                min-resolution: 192dpi) and (min-width: 700px),
only screen and (                min-resolution: 2dppx)  and (min-width: 700px) { 

.chrome {
	background-image:url('browsers@2x.png');
	background-size: auto 30px;
	background-position:0px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.firefox {
	background-image:url('browsers@2x.png');
	background-size: auto 30px;
	background-position:-34px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.opera {
	background-image:url('browsers@2x.png');
	background-size: auto 30px;
	background-position:-65px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.safari {
	background-image:url('browsers@2x.png');
	background-size: auto 30px;
	background-position:-96px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}
.ie {
	background-image:url('browsers@2x.png');
	background-size: auto 30px;
	background-position:-130px 0px;
	height: 30px;
	width: 30px;
	display: inline-block;
	vertical-align: middle;
}

}
</style>
<!--<script type="text/javascript" src="http://raw.github.com/laucheukhim/instano/master/instano.js"></script>-->
<script>
/*
 * Instano.js - Instant NoScript Detection
 *
 * @author: Antony Lau (instano.js@gmail.com)
 */

var instano = (function (el) {
	
	/* Testing for CSS animation support 
	***************************************************************************/
	// https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations/Detecting_CSS_animation_support
	
	// Detecting CSS animation support - CSS | MDN
	// fixes from Antony Lau
	
	var animation = false,
		animationstring = 'animation',
		keyframeprefix = '',
		domPrefixes = 'Webkit Moz O ms Khtml'.split(' '),
		pfx  = '',
		testel = document.createElement('div');
	
	if(typeof testel.style.animationName !== "undefined") { animation = true; }    
	 
	if( animation === false ) {
	  for( var i = 0; i < domPrefixes.length; i++ ) {
		if( typeof testel.style[ domPrefixes[i] + 'AnimationName' ] !== "undefined" ) {
		  pfx = domPrefixes[ i ];
		  animationstring = pfx + 'Animation';
		  keyframeprefix = '-' + pfx.toLowerCase() + '-';
		  animation = true;
		  break;
		}
	  }
	}
	
	/* Detect if JavaScript is reenabled (not supported by Opera)
	***************************************************************************/
	// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
	// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
	 
	// requestAnimationFrame polyfill by Erik MÃ¶ller
	// fixes from Paul Irish and Tino Zijdel
	 
	(function() {
		var lastTime = 0;
		var vendors = ['ms', 'moz', 'webkit', 'o'];
		for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
			window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
			window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] 
									   || window[vendors[x]+'CancelRequestAnimationFrame'];
		}
	 
		if (!window.requestAnimationFrame)
			window.requestAnimationFrame = function(callback, element) {
				var currTime = new Date().getTime();
				var timeToCall = Math.max(0, 16 - (currTime - lastTime));
				var id = window.setTimeout(function() { callback(currTime + timeToCall); }, 
				  timeToCall);
				lastTime = currTime + timeToCall;
				return id;
			};
	 
		if (!window.cancelAnimationFrame)
			window.cancelAnimationFrame = function(id) {
				clearTimeout(id);
			};
	}());
	
	var continuousTime = new Date().getTime(), javascriptTime = new Date().getTime(), reportStatus = true, disabledDuration = 0, disabledCallback, disabledCallbackDelay,  disabledCallbackDuration, reenabledCallback, executeTimeout = false, executeInterval = false, executeTime;
	
	function step(timestamp) {
		continuousTime = new Date().getTime();
		if (reportStatus) {
			if ((continuousTime - javascriptTime) >= 500) {
				disabledDuration++;
				if (disabledDuration > 10) {
					// JavaScript is disabled
					if (typeof disabledCallback === "function") {
						if (disabledCallbackDelay !== false && disabledCallbackDuration !== false) {
							if (disabledCallbackDelay === "setTimeout") executeTimeout = true;
							if (disabledCallbackDelay === "setInterval") executeInterval = true;
							executeTime = continuousTime + disabledCallbackDuration;
						} else {
							disabledCallback();
						}
					}
					reportStatus = false;
				}
			}
		} else {
			if ((continuousTime - javascriptTime) < 500) {
				// JavaScript is reenabled
				if (typeof reenabledCallback === "function") {
					reenabledCallback();
				}
				disabledDuration = 0;
				executeTimeout = false;
				executeInterval = false;
				reportStatus = true;
			}
		}
		if (executeTimeout) {
			if (continuousTime >= executeTime) {
				disabledCallback();
				executeTimeout = false;
			}
		}
		if (executeInterval) {
			if (continuousTime >= executeTime) {
				disabledCallback();
				executeTime = continuousTime + disabledCallbackDuration;
			}
		}
		requestAnimationFrame(step);
	}
	requestAnimationFrame(step);
	
	setInterval(function() {
		javascriptTime = new Date().getTime();
	}, 16)
	
	/* Create the CSS animation class
	***************************************************************************/
	if (animation) {
		var css = 
		'.nojs_init { position:relative; display:inline-block; vertical-align:top; animation:nojs-animation 0.2s step-end; -moz-animation:nojs-animation 0.2s step-end; -webkit-animation:nojs-animation 0.2s step-end;  -o-animation:nojs-animation 0.2s step-end; } ' + 
		'@keyframes nojs-animation { from {width:0px;height:0px;visibility:hidden;opacity:0;} to {width:1px;height:1px;visibility:visible;opacity:1;} } ' + 
		'@-moz-keyframes nojs-animation { from {width:0px;height:0px;visibility:hidden;opacity:0;} to {width:1px;height:1px;visibility:visible;opacity:1;} } ' + 
		'@-webkit-keyframes nojs-animation { from {width:0px;height:0px;visibility:hidden;opacity:0;} to {width:1px;height:1px;visibility:visible;opacity:1;} } ' + 
		'@-o-keyframes nojs-animation { from {width:0px;height:0px;visibility:hidden;opacity:0;} to {width:1px;height:1px;visibility:visible;opacity:1;} }';
		if ('\v' == 'v') /* ie only */ {
			document.createStyleSheet().cssText = css;
		}
		else {
			var style = document.createElement('style');
			style.type = 'text/css';
			style.innerHTML = css;
			document.getElementsByTagName('head')[0].appendChild(style);
		}
	}
	
	var func = function (el) {
		var selectAll = (arguments.length === 0) ? true : false;
		// Check if it is a DOM element
		function isElement(o){
			return (
				typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2
				o && typeof o === "object" && o.nodeType === 1 && typeof o.nodeName==="string"
			);
		}
		return {
			init: function(interval, displayStyle) {
				interval = Math.round(typeof interval === "number" ? (interval >= 0 && interval <= 200 ?interval : 100) : 100);
				displayStyle = displayStyle === "block" || displayStyle === "inline-block" ? displayStyle : "inline-block";
				if (animation) {
					if (selectAll) {
						// Find all the noscript tags
						var nos = document.getElementsByTagName("noscript");
					} else if (Object.prototype.toString.call(el) === "[object Array]") {
						var nos = [];
						for (var i = 0; i < el.length; i++) {
							if (isElement(el[i])) {
								var nosj = el[i].getElementsByTagName("noscript");
								for (var j in nosj) {
									if (isElement(nosj[j])) nos.push(nosj[j]);
								}
							} else if (document.getElementById(el[i])) {
								var nosj = document.getElementById(el[i]).getElementsByTagName("noscript");
								for (var j in nosj) {
									if (isElement(nosj[j])) nos.push(nosj[j]);
								}
							}
						}
					} else if (isElement(el)) {
						// Find the noscript tags within an element
						var nos = el.getElementsByTagName("noscript");
					} else if (document.getElementById(el)) {
						var nos = document.getElementById(el).getElementsByTagName("noscript");
					}
					var elreplace = {};
					if (nos) {
						for (var i = 0; i < nos.length; i++) {
							var newone = document.createElement('div');
							newone.id = "jsdetect_" + i;
							newone.className = "nojs_init";
							newone.style.display = displayStyle;
							newone.innerHTML = nos[i].textContent;
							elreplace[i] = {
								parent: nos[i].parentNode,
								newel: newone,
								original: nos[i]
							};
						}
						for (var i in elreplace) {
							// Replace noscript with span
							elreplace[i].parent.replaceChild(elreplace[i].newel, elreplace[i].original);
						}
						// Continuously replace element to stop animation
						// WARNING: An interval of 0 is found to be CPU intensive. Choose it wisely.
						setInterval(function() {
							for (var i in elreplace) {
								var el = document.getElementById(elreplace[i].newel.id);
								var newone = el.cloneNode(true);
								el.parentNode.replaceChild(newone, el);
							}
						}, interval);
					}
				}
				return this;
			},
			disabled: function(callback, delay, duration) {
				disabledCallback = callback;
				disabledCallbackDelay = delay === "setTimeout" || delay === "setInterval" ? delay : false;
				disabledCallbackDuration = typeof duration === "number" && duration >= 0 ? Math.round(duration) : false;
				return this;
			},
			reenabled: function(callback) {
				reenabledCallback = callback;
				return this;
			}
		};
	}
	
	return func;
})();
</script>
</head>
<body>
<a href="https://github.com/laucheukhim/instano"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 1000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
<div id="banner-message"><noscript>instano.js is currently in Pre-Alpha stage. Development use only.</noscript></div>
<div id="main">
<div id="top">
    <div class="left">
    <div id="logo">INSTA<span class="emphasis">NO.JS</span></div>
    <div id="sublogo"><noscript>Instant NoScript Detection</noscript></div>
    </div>
    <div class="right">
    <div id="descriptions">instano.js allows you to instantly detect if JavaScript is disabled after the page is loaded. It modifies the standard <code>&lt;noscript&gt;</code> tags so that the messages inside can be shown immediately whenever JavaScript is disabled. You can also apply callback functions when JavaScript is disabled and reenabled.</div>
    <div id="indicator"><span id="enabled-state" class="instructions label"></span><span id="disabled-state" class="instructions label"><noscript>Turn on JavaScript first and reload the page</noscript></span></div>
    </div>
</div>
<div id="content">
	<div class="features">Display INSTANT noscript message</div>
    <div class="compare">
        <div class="compare-noscript">
            <div class="compare-head">
                <div class="big-title compare-title">noscript</div>
                <div class="compare-result"><noscript>You have to load the page with JavaScript disabled to see this message.</noscript></div>
            </div>
            <div class="clear"></div>
            <div><pre>&lt;noscript&gt;You have to load the page with JavaScript disabled to see this message.&lt;/noscript&gt;</pre></div>
        </div>
        <div class="compare-instano">
            <div class="compare-head">
                <div class="big-title compare-title">instano.js</div>
                <div id="instano-example" class="compare-result"><noscript>You can see this message as soon as JavaScript is disabled.</noscript></div>
            </div>
            <div class="clear"></div>
            <div><pre>&lt;noscript&gt;You can see this message as soon as JavaScript is disabled.&lt;/noscript&gt;
&lt;script src="instano.js"&gt;&lt;/script&gt;
&lt;script&gt;
    instano().init();
&lt;/script&gt;</pre></div>
        </div>
    </div>
    <div class="features">Run JavaScript AFTER it is disabled</div>
    <div class="compare">
        <div class="compare-setInterval">
            <div class="compare-head">
                <div class="big-title compare-title">setInterval</div>
                <div id="setInterval-example" class="compare-result"></div>
            </div>
            <div class="clear"></div>
            <div><pre>setInterval(function() {
    document.getElementById("setInterval-example").innerHTML = new Date().toLocaleString();
}, 0);</pre></div>
        </div>
        <div class="compare-instano">
            <div class="compare-head">
                <div class="big-title compare-title">instano.js</div>
                <div id="instano-callback-example" class="compare-result"></div>
            </div>
            <div class="clear"></div>
            <div><pre>
instano().disabled(function() {
    document.getElementById("instano-callback-example").innerHTML = new Date().toLocaleString();
}, "setInterval", 0);</pre></div>
    	</div>
    </div>
    <div class="title">DOWNLOAD</div>
    <p>instano.js is currently in Pre-Alpha stage. Download the source code on <a href="https://github.com/laucheukhim/instano">GitHub</a> (development use only).</p>
    <div class="title">COMPATIBILITY</div>
    <p>instano.js uses plain JavaScript and <code>@keyframes</code> CSS animation to disaplay instant messages. There is a fallback to standard <code>&lt;noscript&gt;</code> tags for non-supported browsers. The callback functions require the use of <code>requestAnimationFrame</code> and is supported by a limited number of mordern browsers.</p>
    <div class="browser-compatibility">
    	<div class="row">
        	<div class="cell"></div>
        	<div class="cell"><div class="chrome"></div></div>
            <div class="cell"><div class="firefox"></div></div>
            <div class="cell"><div class="opera"></div></div>
            <div class="cell"><div class="safari"></div></div>
            <div class="cell"><div class="ie"></div></div>
        </div>
        <div class="row">
        	<div class="cell">Instant Message</div>
            <div class="cell">(Yes)</div>
            <div class="cell">5.0+</div>
            <div class="cell">12+</div>
            <div class="cell">4.0+</div>
            <div class="cell">10+(not tested)</div>
        </div>
        <div class="row">
        	<div class="cell">Callback Function</div>
            <div class="cell">21.0+</div>
            <div class="cell">14.0+</div>
            <div class="cell">Not supported</div>
            <div class="cell">6.0+</div>
            <div class="cell">10+(not tested)</div>
        </div>
    </div>
    <div class="title">ORIGIN</div>
    <p>This code started as an answer to the Stack Overflow question <a href="http://stackoverflow.com/a/14764039/1493698" target="_blank">"How can a site instantly detect that javascript has been disabled?"</a></p>
    <div class="title">AUTHOR</div>
    <p>Antony Lau <script type="text/javascript">
	document.write("&lt;");
	//<![CDATA[
	<!--
	var x="function f(x){var i,o=\"\",l=x.length;for(i=l-1;i>=0;i--) {try{o+=x.c" +
	"harAt(i);}catch(e){}}return o;}f(\")\\\"function f(x,y){var i,o=\\\"\\\\\\\""+
	"\\\\,l=x.length;for(i=0;i<l;i++){if(i<67)y++;y%=127;o+=String.fromCharCode(" +
	"x.charCodeAt(i)^(y++));}return o;}f(\\\"\\\\ )+?!+>&z!*3(;\\\\\\\\014\\\\\\" +
	"\\014LDT\\\\\\\\013L\\\\\\\\006\\\\\\\\002\\\\\\\\027\\\\\\\\022K$X\\\\\\\\" +
	"021\\\\\\\\037hoqh3bc|er{x7qn_FNDNE\\\\\\\\005N@\\\\\\\\\\\\\\\\o\\\\\\\\02" +
	"7\\\\\\\\027MRIS$~\\\\\\\\031e\\\\\\\\n%%8,-;p0''<:$\\\\\\\\013zg35/)?1\\\\" +
	"\\\\017O\\\\\\\\010\\\\\\\\020$\\\\\\\\002\\\\\\\\013\\\\\\\\006\\\\\\\\001" +
	"\\\\\\\\005D\\\\\\\\010\\\\\\\\003\\\\\\\\000R@\\\\\\\\021OPZOEM\\\"\\\\,67" +
	")\\\"(f};)lo,0(rtsbus.o nruter};)i(tArahc.x=+o{)--i;0=>i;1-l=i(rof}}{)e(hct" +
	"ac};l=+l;x=+x{yrt{)84=!)31/l(tAedoCrahc.x(elihw;lo=l,htgnel.x=lo,\\\"\\\"=o" +
	",i rav{)x(f noitcnuf\")"                                                     ;
	while(x=eval(x));
	//-->
	//]]>
	document.write("&gt;");
	</script></p>
</div>
</div>
<script>
document.getElementById("enabled-state").innerHTML = "Turn off JavaScript now and see the difference";
document.getElementById("disabled-state").style.display = "none";
setInterval(function() {
	document.getElementById("setInterval-example").innerHTML = new Date().toLocaleString();
	document.getElementById("instano-callback-example").innerHTML = new Date().toLocaleString();
}, 0);
instano(["banner-message","sublogo","instano-example"]).init(16,"block")
.disabled(function() {
	document.getElementById("instano-callback-example").innerHTML = new Date().toLocaleString();
}, "setInterval", 0);
</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38572703-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type="text/javascript">
var sc_project=8715674; 
var sc_invisible=1; 
var sc_security="215f0635"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="http://c.statcounter.com/8715674/0/215f0635/1/"
alt="web analytics"></a></div></noscript>
</body>
</html>
